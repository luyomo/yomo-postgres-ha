<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="569px" preserveAspectRatio="none" style="width:664px;height:569px;" version="1.1" viewBox="0 0 664 569" width="664px" zoomAndPan="magnify"><defs><filter height="300%" id="ft5aa4zwyl87d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="368" x="143.75" y="22.9951">Switchover by the sequence (slave -&gt; master)</text><rect fill="#FFFFFF" filter="url(#ft5aa4zwyl87d)" height="441.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="41.5" y="78.5938"/><rect fill="#FFFFFF" filter="url(#ft5aa4zwyl87d)" height="441.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="391.5" y="78.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="46" x2="46" y1="68.5938" y2="529.0547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="396" x2="396" y1="68.5938" y2="529.0547"/><rect fill="#FEFECE" filter="url(#ft5aa4zwyl87d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="8" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="15" y="53.292">NODE01</text><rect fill="#FEFECE" filter="url(#ft5aa4zwyl87d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="8" y="528.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="15" y="548.0498">NODE01</text><rect fill="#FEFECE" filter="url(#ft5aa4zwyl87d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="358" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="365" y="53.292">NODE02</text><rect fill="#FEFECE" filter="url(#ft5aa4zwyl87d)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="358" y="528.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="365" y="548.0498">NODE02</text><rect fill="#FFFFFF" filter="url(#ft5aa4zwyl87d)" height="441.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="41.5" y="78.5938"/><rect fill="#FFFFFF" filter="url(#ft5aa4zwyl87d)" height="441.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="391.5" y="78.5938"/><rect fill="#EEEEEE" filter="url(#ft5aa4zwyl87d)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="649.5" x="3" y="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="652.5" y1="99.1602" y2="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="652.5" y1="102.1602" y2="102.1602"/><rect fill="#EEEEEE" filter="url(#ft5aa4zwyl87d)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="215" x="220.25" y="88.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="226.25" y="104.6606">Initialize the cluster status</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="93.5" y1="142.8594" y2="142.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93.5" x2="93.5" y1="142.8594" y2="155.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52.5" x2="93.5" y1="155.8594" y2="155.8594"/><polygon fill="#A80036" points="62.5,151.8594,52.5,155.8594,62.5,159.8594,58.5,155.8594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="58.5" y="137.7935">Start the NODE01 as the master node</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="401.5" x2="443.5" y1="184.9922" y2="184.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="443.5" x2="443.5" y1="184.9922" y2="197.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="443.5" y1="197.9922" y2="197.9922"/><polygon fill="#A80036" points="412.5,193.9922,402.5,197.9922,412.5,201.9922,408.5,197.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="408.5" y="179.9263">Start the NODE02 as the slave node</text><rect fill="#EEEEEE" filter="url(#ft5aa4zwyl87d)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="649.5" x="3" y="226.5586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="652.5" y1="226.5586" y2="226.5586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="652.5" y1="229.5586" y2="229.5586"/><rect fill="#EEEEEE" filter="url(#ft5aa4zwyl87d)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="137" x="259.25" y="215.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="265.25" y="232.0591">Stop the cluster</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="401.5" x2="443.5" y1="270.2578" y2="270.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="443.5" x2="443.5" y1="270.2578" y2="283.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="443.5" y1="283.2578" y2="283.2578"/><polygon fill="#A80036" points="412.5,279.2578,402.5,283.2578,412.5,287.2578,408.5,283.2578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="408.5" y="265.1919">Stop the slave node first</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="93.5" y1="312.3906" y2="312.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93.5" x2="93.5" y1="312.3906" y2="325.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52.5" x2="93.5" y1="325.3906" y2="325.3906"/><polygon fill="#A80036" points="62.5,321.3906,52.5,325.3906,62.5,329.3906,58.5,325.3906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="58.5" y="307.3247">Stop the master node second</text><rect fill="#EEEEEE" filter="url(#ft5aa4zwyl87d)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="649.5" x="3" y="353.957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="652.5" y1="353.957" y2="353.957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="652.5" y1="356.957" y2="356.957"/><rect fill="#EEEEEE" filter="url(#ft5aa4zwyl87d)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="157" x="249.25" y="343.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="255.25" y="359.4575">Restart the cluster</text><polygon fill="#A80036" points="379.5,393.5234,389.5,397.5234,379.5,401.5234,383.5,397.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="385.5" y1="397.5234" y2="397.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="58.5" y="392.5903">Sync the wal log files after the NODE01 stop</text><polygon fill="#A80036" points="379.5,422.6563,389.5,426.6563,379.5,430.6563,383.5,426.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="385.5" y1="426.6563" y2="426.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="316" x="58.5" y="421.7231">Sync the slots files if NODE02 lag behind NODE01</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="401.5" x2="443.5" y1="455.9219" y2="455.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="443.5" x2="443.5" y1="455.9219" y2="468.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="443.5" y1="468.9219" y2="468.9219"/><polygon fill="#A80036" points="412.5,464.9219,402.5,468.9219,412.5,472.9219,408.5,468.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="408.5" y="450.856">Restart the node as master</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="93.5" y1="498.0547" y2="498.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93.5" x2="93.5" y1="498.0547" y2="511.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52.5" x2="93.5" y1="511.0547" y2="511.0547"/><polygon fill="#A80036" points="62.5,507.0547,52.5,511.0547,62.5,515.0547,58.5,511.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="58.5" y="492.9888">Restart the node as slave</text><!--
@startuml
title Switchover by the sequence (slave -> master)
activate NODE01
activate NODE02
== Initialize the cluster status ==
NODE01 -> NODE01 : Start the NODE01 as the master node
NODE02 -> NODE02 : Start the NODE02 as the slave node

== Stop the cluster ==
NODE02 -> NODE02 : Stop the slave node first
NODE01 -> NODE01 : Stop the master node second

== Restart the cluster ==
NODE01 -> NODE02 : Sync the wal log files after the NODE01 stop
NODE01 -> NODE02 : Sync the slots files if NODE02 lag behind NODE01
NODE02 -> NODE02 : Restart the node as master
NODE01 -> NODE01 : Restart the node as slave

@enduml

PlantUML version 1.2017.15(Tue Jul 04 01:45:34 JST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Linux
OS Version: 4.12.3-1.el7.elrepo.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>